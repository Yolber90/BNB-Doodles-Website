<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Jquery Library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/stylesheets/puppies.css">
    <!-- Javascript -->
    <script src="/javascript/javascript.js" defer></script>

    <title>BNB Doodles | Puppies</title>

</head>

<body>

    <header>
        <div id="header-box">
            <div id="header-logo">
                <a href="/home.html">
                    <img id="logo-img" src="/media/Broke Not Broken-03 (2).jpg" alt="BNB Logo">
                </a>
            </div>
            <div id="header-name">
                <h1 style="margin: auto;">BNB DOOLES</h1>
            </div>
            <button id="hmbrgr-menu-btn" class="material-symbols-outlined">MENU</button>
        </div>

        <div id="header-menu">

            <ul id="nav-menu">
                <li>
                    <a href="/home.html">
                        <button id="nav-btn">HOME</button>
                    </a>

                </li>
                <li>
                    <a href="/puppies.html">
                        <button id="nav-btn">PUPPIES</button>
                    </a>
                </li>
                <li>
                    <a href="/contact_us.html">
                        <button id="nav-btn">CONTACT US</button>
                    </a>
                </li>
            </ul>

        </div>
    </header>
    <!-- END HEADER -->

    <div id="container">
        <div class="new-mobile-menu">
            <a href="/home.html">Home</a>
            <hr>
            <a href="/puppies.html">Puppies</a>
            <hr>
            <a href="/contact_us.html">Contact Us</a>
            <hr>
        </div>
        <h1 id="container-header">Doodles for Sale
            <hr id="header-hr">
        </h1>
        <!-- !Listing - Loaded with jquery-->
        <div id="listing"></div>
    </div>
    <div id="footer">
        <div id="social-media">
            <a target="_blank" href="https://www.instagram.com/brokenotbroken2022/?igshid=Zjc2ZTc4Nzk%3D">
                <img class="instagram" src="/media/instagram.png" alt="instagram">
            </a>
        </div>
    </div>




    <script type="text/javascript">
        $(document).ready(function () {

            let testLink = "https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/GDP-data.json";// Calibration Link

            $.get("/json/database", function (data) {

                // Variable Declerations
                const objData = JSON.parse(data); //convert data into an obj
                const pups = objData.puppies //short cont for for data.puppies
                const dataLen = Object.keys(pups).length // get the obj length
                const today = new Date();// establish CPU Date
                const born = new Date(objData.litterInception)// Pickup litter date from JSON
                const daySince = today.getTime() - born.getTime()// Find difference between CPU Date and inception date
                const diff = daySince / (1000 * 3600 * 24);// Convert into Days.
                const finalDiff = Math.round(diff);// Round the diff

                let dogs = []
                for (const key in pups) {
                    dogs.push(key);
                };

                for (let i = 0; i < dogs.length; i++) {
                    $("#listing").append(
                        "<div id='posting' class= img" + [i] + "></div>"
                    );
                    $(".img" + [i]).append(
                        // pups[dogs[i]].thumbnail
                        // "<a href='bnb_doodles_puppies_details_kai.html' target='_blank'>" + pups[dogs[i]].thumbnail  + "</a>"
                        "<a  href='puppy_details_" + pups[dogs[i]].name + ".html' target='_blank'>" + pups[dogs[i]].thumbnail + "</a>"

                    )
                    $(".img" + [i]).append(
                        "<div id='info' class=info" + [i] + ">" +
                        "<ul id=ul-list" + [i] + "></ul>" + "</div>"
                    )
                    $("#ul-list" + [i]).append(
                        "<li class='ident-name'><strong>" + pups[dogs[i]].name + "</strong></li>" +
                        "<li id='ident'>" + pups[dogs[i]].sex + "</li>" +
                        "<li id='ident'>Bon on:  " + pups[dogs[i]].DOB + "<br>" + finalDiff + " Days Old</li>" +
                        "<li id='ident' style='color: lightgreen'><strong>" + pups[dogs[i]].price + "<strong></li>"
                    )
                }
            })

        });
    </script>
</body>

</html>